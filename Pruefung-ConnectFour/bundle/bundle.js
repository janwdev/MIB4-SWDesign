(()=>{"use strict";var t={752:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Computer=void 0;const s=o(607);e.Computer=class{constructor(){this.computerLastSet=[-1,-1],this.CMCROW=0,this.CMCCOLUMN=1,this.CMCLDRT=2,this.CMCLTRD=3,this.direction=-1}setComputerTictactoe(){if(this.searchForPositionWithMostConnectedComputerTTT(),this.computerLastSet[0]<0||this.computerLastSet[1]<0){let t=!1;for(;!t;)this.computerLastSet[0]=s.control.getRandomInt(0,s.control.sizeX),this.computerLastSet[1]=s.control.getRandomInt(0,s.control.sizeY),s.control.playArray[this.computerLastSet[1]][this.computerLastSet[0]]==s.control.FIELDEMPTY&&(t=!0,s.control.playArray[this.computerLastSet[1]][this.computerLastSet[0]]=s.control.FIELDUSER2)}else{let t=this.computerLastSet[0],e=this.computerLastSet[1],o=!1;switch(this.direction){case this.CMCCOLUMN:for(let i=1;i<s.control.winningPointsInRow&&e+i<s.control.sizeY;i++)if(s.control.playArray[e+i][t]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCCOLUMN)){s.control.playArray[e+i][t]=s.control.FIELDUSER2,this.computerLastSet[1]=e+i,s.control.lastFieldSetXY=[t,e+i],o=!0;break}}else if(s.control.playArray[e+i][t]==s.control.FIELDUSER1)break;if(!o)for(let i=1;i<s.control.winningPointsInRow&&e-i>=0;i++)if(s.control.playArray[e-i][t]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCCOLUMN)){s.control.playArray[e-i][t]=s.control.FIELDUSER2,this.computerLastSet[1]=e-i,s.control.lastFieldSetXY=[t,e-i],o=!0;break}}else if(s.control.playArray[e-i][t]==s.control.FIELDUSER1)break;case this.CMCROW:for(let i=1;i<s.control.winningPointsInRow&&t+i<s.control.sizeX;i++)if(s.control.playArray[e][t+i]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCROW)){s.control.playArray[e][t+i]=s.control.FIELDUSER2,this.computerLastSet[0]=t+i,s.control.lastFieldSetXY=[t+i,e],o=!0;break}}else if(s.control.playArray[e][t+i]==s.control.FIELDUSER1)break;if(!o)for(let i=1;i<s.control.winningPointsInRow&&t-i>=0;i++)if(s.control.playArray[e][t-i]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCROW)){s.control.playArray[e][t-i]=s.control.FIELDUSER2,this.computerLastSet[0]=t-i,s.control.lastFieldSetXY=[t-i,e],o=!0;break}}else if(s.control.playArray[e][t-i]==s.control.FIELDUSER1)break;break;case this.CMCLDRT:for(let i=1;i<s.control.winningPointsInRow&&t-i>=0&&e+i<s.control.sizeY;i++)if(s.control.playArray[e+i][t-i]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCLDRT)){s.control.playArray[e+i][t-i]=s.control.FIELDUSER2,this.computerLastSet[0]=t-i,this.computerLastSet[1]=e+i,s.control.lastFieldSetXY=[t-i,e+i],o=!0;break}}else if(s.control.playArray[e+i][t-i]==s.control.FIELDUSER1)break;if(!o)for(let i=1;i<s.control.winningPointsInRow&&t+i<s.control.sizeX&&e-i>=0;i++)if(s.control.playArray[e-i][t+i]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCLDRT)){s.control.playArray[e-i][t+i]=s.control.FIELDUSER2,this.computerLastSet[0]=t+i,this.computerLastSet[1]=e-i,s.control.lastFieldSetXY=[t+i,e-i],o=!0;break}}else if(s.control.playArray[e-i][t+i]==s.control.FIELDUSER1)break;break;case this.CMCLTRD:for(let i=1;i<s.control.winningPointsInRow&&e+i<s.control.sizeY&&t-i>=0;i++)if(s.control.playArray[e+i][t-i]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCLTRD)){s.control.playArray[e+i][t-i]=s.control.FIELDUSER2,this.computerLastSet[0]=t-i,this.computerLastSet[1]=e-i,s.control.lastFieldSetXY=[t-i,e+i],o=!0;break}}else if(s.control.playArray[e+i][t-i]==s.control.FIELDEMPTY)break;if(!o)for(let i=1;i<s.control.winningPointsInRow&&e-i>=0&&t+i<s.control.sizeX;i++)if(s.control.playArray[e-i][t+i]==s.control.FIELDEMPTY){if(this.enoughFreeFieldsAtPoint(t,e,this.CMCLTRD)){s.control.playArray[e-i][t+i]=s.control.FIELDUSER2,this.computerLastSet[0]=t+i,this.computerLastSet[1]=e-i,s.control.lastFieldSetXY=[t+i,e-i],o=!0;break}}else if(s.control.playArray[e-i][t+i]==s.control.FIELDEMPTY)break}if(!o){let t=!1;for(;!t;)this.computerLastSet[0]=s.control.getRandomInt(0,s.control.sizeX),this.computerLastSet[1]=s.control.getRandomInt(0,s.control.sizeY),s.control.playArray[this.computerLastSet[1]][this.computerLastSet[0]]==s.control.FIELDEMPTY&&(t=!0,s.control.playArray[this.computerLastSet[1]][this.computerLastSet[0]]=s.control.FIELDUSER2,s.control.lastFieldSetXY=[this.computerLastSet[0],this.computerLastSet[1]])}}}searchForPositionWithMostConnectedComputerTTT(){let t=-1;for(let e=0;e<s.control.sizeY;e++)for(let o=0;o<s.control.sizeX;o++)if(s.control.playArray[e][o]==s.control.FIELDUSER2){let i=s.control.checkRows(o,e),r=s.control.checkColumns(o,e),n=s.control.checkDiagonalLDRT(o,e),l=s.control.checkDiagonalLTRD(o,e);t<i&&this.enoughFreeFieldsAtPoint(o,e,this.CMCROW)&&(t=i,this.computerLastSet[0]=o,this.computerLastSet[1]=e,this.direction=this.CMCROW),t<r&&this.enoughFreeFieldsAtPoint(o,e,this.CMCCOLUMN)&&(t=r,this.computerLastSet[0]=o,this.computerLastSet[1]=e,this.direction=this.CMCCOLUMN),t<n&&this.enoughFreeFieldsAtPoint(o,e,this.CMCLDRT)&&(t=n,this.computerLastSet[0]=o,this.computerLastSet[1]=e,this.direction=this.CMCLDRT),t<l&&this.enoughFreeFieldsAtPoint(o,e,this.CMCLTRD)&&(t=l,this.computerLastSet[0]=o,this.computerLastSet[1]=e,this.direction=this.CMCLTRD)}-1==this.direction&&(this.computerLastSet[0]=-1,this.computerLastSet[1]=-1,console.log("Cant find most connected"))}setComputerInputConnectFour(){if(this.computerLastSet[0]<0||this.computerLastSet[1]<0){let t=!1;for(;!t;)this.computerLastSet[0]=s.control.getRandomInt(0,s.control.sizeX),this.highestYPosinColumn(this.computerLastSet[0])>=0&&(this.computerLastSet[1]=this.highestYPosinColumn(this.computerLastSet[0]),s.control.playArray[this.computerLastSet[1]][this.computerLastSet[0]]==s.control.FIELDEMPTY&&(t=!0,s.control.playArray[this.computerLastSet[1]][this.computerLastSet[0]]=s.control.FIELDUSER2))}else{let t=-1,e=-1,o=-1,i=-1;for(let r=0;r<s.control.sizeX;r++){let n=this.highestYPosinColumn(r);if(n>=0&&s.control.playArray[n][r]==s.control.FIELDEMPTY){s.control.playArray[n][r]=s.control.FIELDUSER2;let l=s.control.checkRows(r,n),a=s.control.checkColumns(r,n),c=s.control.checkDiagonalLDRT(r,n),h=s.control.checkDiagonalLTRD(r,n);t<l&&this.enoughFreeFieldsAtPoint(r,n,this.CMCROW)&&(t=l,o=r,i=n,e=this.CMCROW),t<a&&this.enoughFreeFieldsAtPoint(r,n,this.CMCCOLUMN)&&(t=a,o=r,i=n,e=this.CMCROW),t<c&&this.enoughFreeFieldsAtPoint(r,n,this.CMCLDRT)&&(t=c,o=r,i=n,e=this.CMCROW),t<h&&this.enoughFreeFieldsAtPoint(r,n,this.CMCLTRD)&&(t=h,o=r,i=n,e=this.CMCROW),s.control.playArray[n][r]=s.control.FIELDEMPTY}}if(this.computerLastSet[0]=o,this.computerLastSet[1]=i,!(o>=0&&i>=0))return this.setComputerInputConnectFour();s.control.lastFieldSetXY[0]=o,s.control.lastFieldSetXY[1]=i,s.control.playArray[i][o]=s.control.FIELDUSER2}}enoughFreeFieldsAtPoint(t,e,o){let i=1;switch(o){case this.CMCROW:for(let o=1;o<s.control.winningPointsInRow&&t+o<s.control.sizeX&&!(s.control.isUser1Playing&&s.control.playArray[e][t+o]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e][t+o]==s.control.FIELDUSER1);o++)i++;for(let o=1;o<s.control.winningPointsInRow&&t-o>=0&&!(s.control.isUser1Playing&&s.control.playArray[e][t-o]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e][t-o]==s.control.FIELDUSER1);o++)i++;break;case this.CMCCOLUMN:for(let o=1;o<s.control.winningPointsInRow&&e+o<s.control.sizeY&&!(s.control.isUser1Playing&&s.control.playArray[e+o][t]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e+o][t]==s.control.FIELDUSER1);o++)i++;for(let o=1;o<s.control.winningPointsInRow&&e-o>=0&&!(s.control.isUser1Playing&&s.control.playArray[e-o][t]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e-o][t]==s.control.FIELDUSER1);o++)i++;break;case this.CMCLTRD:for(let o=1;o<s.control.winningPointsInRow&&e+o<s.control.sizeY&&t+o<s.control.sizeX&&!(s.control.isUser1Playing&&s.control.playArray[e+o][t+o]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e+o][t+o]==s.control.FIELDUSER1);o++)i++;for(let o=1;o<s.control.winningPointsInRow&&e-o>=0&&t-o>=0&&!(s.control.isUser1Playing&&s.control.playArray[e-o][t-o]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e-o][t-o]==s.control.FIELDUSER1);o++)i++;break;case this.CMCLDRT:for(let o=1;o<s.control.winningPointsInRow&&e-o>=0&&t+o<s.control.sizeX&&!(s.control.isUser1Playing&&s.control.playArray[e-o][t+o]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e-o][t+o]==s.control.FIELDUSER1);o++)i++;for(let o=1;o<s.control.winningPointsInRow&&e+o<s.control.sizeY&&t-o>=0&&!(s.control.isUser1Playing&&s.control.playArray[e+o][t-o]==s.control.FIELDUSER2||!s.control.isUser1Playing&&s.control.playArray[e+o][t-o]==s.control.FIELDUSER1);o++)i++}return i>=s.control.winningPointsInRow}highestYPosinColumn(t){let e=s.control.sizeY-1;for(let o=0;o<s.control.sizeY;o++)if(s.control.playArray[o][t]!=s.control.FIELDEMPTY){e=o-1;break}return e}}},941:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function l(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,l)}a((s=s.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Control=e.database=void 0;const r=i(o(467)),n=o(435),l=o(752),a=o(361);e.database=r.default.getInstance();class c{constructor(){this.playAgainstComputer=!0,this.sizeX=0,this.sizeY=0,this.winningPointsInRow=0,this.playArray=[],this.FIELDEMPTY=0,this.FIELDUSER1=1,this.FIELDUSER2=2,this.lastFieldSetXY=[-1,-1],this.isUser1Playing=!0,this.GAMEMODETICTACTOE=0,this.GAMEMODECONNECTFOUR=1,this.regManager=new n.RegistrationManagerImp,this.computer=new l.Computer,this.inputManager=new a.InputManager,this.DRAWFIELDEMPTY="-",this.DRAWFIELDUSER1="X",this.DRAWFIELDUSER2="O",this.gameOver=!1}main(){return s(this,void 0,void 0,(function*(){for(yield this.inputManager.getGameMode(),console.log("Gamemode: "+this.gameMode),yield this.inputManager.playAgainstWho(),console.log("Against Computer: "+this.playAgainstComputer),c.user=yield this.inputManager.howToPlay("What do you want to do?"),this.playAgainstComputer?c.user2=this.regManager.registerComputerUser():c.user2=yield this.inputManager.howToPlay("What want the other human to do?"),console.log("User1: "+c.user.username),console.log("User2: "+c.user2.username),console.log(c.user.returnStatistic()),yield this.inputManager.createPlayground(),this.drawPlayground();!this.gameOver;)yield this.waitAndSetUserInput(),this.drawPlayground(),this.gameOver=yield this.checkIfGameOver(),this.isUser1Playing=!this.isUser1Playing;this.exitProgram()}))}checkDiagonalLTRD(t,e){let o=1;for(let s=1;e-s>=0&&t-s>=0&&(this.isUser1Playing&&this.playArray[e-s][t-s]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[e-s][t-s]==this.FIELDUSER2);s++)o++;for(let s=1;e+s<this.sizeY&&t+s<this.sizeX&&(this.isUser1Playing&&this.playArray[e+s][t+s]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[e+s][t+s]==this.FIELDUSER2);s++)o++;return o}checkDiagonalLDRT(t,e){let o=1;for(let s=1;s+t<this.sizeX&&e-s>=0&&(this.isUser1Playing&&this.playArray[e-s][t+s]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[e-s][t+s]==this.FIELDUSER2);s++)o++;for(let s=1;t-s>=0&&e+s<this.sizeY&&(this.isUser1Playing&&this.playArray[e+s][t-s]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[e+s][t-s]==this.FIELDUSER2);s++)o++;return o}checkDiagonal(t,e){let o=this.checkDiagonalLDRT(t,e),s=this.checkDiagonalLTRD(t,e);return o>s?o:s}checkColumns(t,e){let o=0;for(let s=e;s<this.sizeY&&(this.isUser1Playing&&this.playArray[s][t]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[s][t]==this.FIELDUSER2);s++)o++;for(let s=e-1;s>=0&&(this.isUser1Playing&&this.playArray[s][t]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[s][t]==this.FIELDUSER2);s--)o++;return o}checkRows(t,e){let o=0;for(let s=t;s<this.sizeX&&(this.isUser1Playing&&this.playArray[e][s]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[e][s]==this.FIELDUSER2);s++)o++;for(let s=t-1;s>=0&&(this.isUser1Playing&&this.playArray[e][s]==this.FIELDUSER1||!this.isUser1Playing&&this.playArray[e][s]==this.FIELDUSER2);s--)o++;return o}getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}exitProgram(){return s(this,void 0,void 0,(function*(){yield e.database.disconnect(),console.log("Program ended"),process.exit(0)}))}checkIfGameOver(){return s(this,void 0,void 0,(function*(){let t=yield this.checkIfGameWon();return t||(t=yield this.checkIfGameDrawn()),t}))}checkIfGameWon(){return s(this,void 0,void 0,(function*(){let t=this.checkDiagonal(this.lastFieldSetXY[0],this.lastFieldSetXY[1]),e=this.checkRows(this.lastFieldSetXY[0],this.lastFieldSetXY[1]),o=this.checkColumns(this.lastFieldSetXY[0],this.lastFieldSetXY[1]);if(t>=this.winningPointsInRow||e>=this.winningPointsInRow||o>=this.winningPointsInRow){let t=c.user.username;return this.isUser1Playing?(c.user2.registered&&(yield c.user2.statistics.setValues(!1,!0)),c.user.registered&&(yield c.user.statistics.setValues(!0,!1))):(t=c.user2.username,c.user2.registered&&(yield c.user2.statistics.setValues(!0,!1)),c.user.registered&&(yield c.user.statistics.setValues(!1,!0))),console.log("Congratulations, "+t+", you have won the game"),c.user.registered&&console.log(c.user.returnStatistic()),c.user2.registered&&console.log(c.user2.returnStatistic()),!0}return!1}))}checkIfGameDrawn(){return s(this,void 0,void 0,(function*(){let t=!0;for(let e=0;e<this.sizeX;e++){for(let o=0;o<this.sizeY;o++)if(this.playArray[o][e]==this.FIELDEMPTY){t=!1;break}if(!t)break}return t&&(console.log("Nobody won this game"),c.user.registered&&(yield c.user.statistics.setValues(!1,!1)),c.user2.registered&&(yield c.user2.statistics.setValues(!1,!1))),t}))}drawPlayground(){let t,e=[];for(let t=0;t<this.sizeY;t++)for(let o=0;o<this.sizeX;o++)switch(this.playArray[t][o]){case this.FIELDEMPTY:e.push(this.DRAWFIELDEMPTY);break;case this.FIELDUSER1:e.push(this.DRAWFIELDUSER1);break;case this.FIELDUSER2:e.push(this.DRAWFIELDUSER2)}let o=this.chunkArray(e,this.sizeY),s=[];for(let t=0;t<this.sizeY;t++)s.push(o[t].join("|"));t=s.join("\n"),console.log(t)}waitAndSetUserInput(){return s(this,void 0,void 0,(function*(){let t;t=this.isUser1Playing?c.user.username:c.user2.username,console.log("User "+t+", where do you want to set?"),"Computer"===t?this.gameMode==this.GAMEMODETICTACTOE?this.computer.setComputerTictactoe():this.gameMode==this.GAMEMODECONNECTFOUR?this.computer.setComputerInputConnectFour():this.exitProgram():this.gameMode==this.GAMEMODETICTACTOE?yield this.inputManager.waitAndSetUserInputTictactoe():this.gameMode==this.GAMEMODECONNECTFOUR?yield this.inputManager.waitAndSetUserInputConnectFour():this.exitProgram()}))}chunkArray(t,e){let o=Math.max(t.length/e,1),s=[];for(let i=0;i<e;i++)o*(i+1)<=t.length&&s.push(t.slice(o*i,o*(i+1)));return s}}e.Control=c},467:function(t,e,o){var s=this&&this.__createBinding||(Object.create?function(t,e,o,s){void 0===s&&(s=o),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,s){void 0===s&&(s=o),t[s]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&s(e,t,o);return i(e,t),e},n=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function l(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,l)}a((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const l=r(o(13)),a=r(o(96)),c=o(376);class h{constructor(){if(this.dbName="ConnectFour",this.dbUsersCollectionName="Users",h.database)throw new Error("Please use getInstance()");h.database=this}static getInstance(){return h.database}connect(){return n(this,void 0,void 0,(function*(){if(null==this.dbUsers){if(process.env.dbUserName&&process.env.dbUserPW){const t="mongodb+srv://"+process.env.dbUserName+":"+process.env.dbUserPW+"@swdesign.gu1ll.mongodb.net/"+this.dbName+"?retryWrites=true&w=majority";return this.mongoClient=new l.MongoClient(t,{}),yield this.mongoClient.connect(),this.dbUsers=this.mongoClient.db(this.dbName).collection(this.dbUsersCollectionName),console.log("Database connection",null!=this.dbUsers),null!=this.dbUsers}return!1}return null!=this.dbUsers}))}disconnect(){return n(this,void 0,void 0,(function*(){this.mongoClient&&(yield this.mongoClient.close(),console.log("DBConnection disconnected successfull"))}))}addUserToDB(t){return n(this,void 0,void 0,(function*(){yield this.dbUsers.insertOne(t)}))}login(t,e){return n(this,void 0,void 0,(function*(){let o=yield this.findUserByUsername(t);if(o){if(yield a.compare(e,o.password))return o;console.log("Wrong Password")}return null}))}register(t){return n(this,void 0,void 0,(function*(){let e=yield this.findUserByUsername(t.username);if(e)return console.log("username already exist"),null;{const o=10,s=yield a.hash(t.password,o);let i=new c.User(t.registered,t.username,s);return yield this.addUserToDB(i),e=yield this.findUserByUsername(i.username),e?new c.User(!0,e.username,void 0,e.statistics,e._id):(console.log("Something went wrong"),null)}}))}saveStatistic(t){return n(this,void 0,void 0,(function*(){const e={$set:{statistics:t.statistics}};yield this.dbUsers.updateOne({_id:t._id},e)}))}findUserByUsername(t){return n(this,void 0,void 0,(function*(){return(yield this.dbUsers.findOne({username:t}))||null}))}}e.default=h,h.database=new h},361:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function l(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,l)}a((s=s.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InputManager=void 0;const r=i(o(650)),n=o(607),l=o(941);e.InputManager=class{getGameMode(){return s(this,void 0,void 0,(function*(){let t=!1;for(;!t;)switch((yield r.default.prompt({type:"select",name:"answer",message:"Choose Game-Mode:",choices:[{title:"TicTacToe",value:n.control.GAMEMODETICTACTOE},{title:"ConnectFour",value:n.control.GAMEMODECONNECTFOUR},{title:"Quit program",value:2}]})).answer){case n.control.GAMEMODETICTACTOE:n.control.gameMode=n.control.GAMEMODETICTACTOE,t=!0;break;case n.control.GAMEMODECONNECTFOUR:n.control.gameMode=n.control.GAMEMODECONNECTFOUR,t=!0;break;case 2:t=!0,n.control.exitProgram();break;default:console.log("Wrong Type, try again")}}))}playAgainstWho(){return s(this,void 0,void 0,(function*(){let t=!1;for(;!t;)switch((yield r.default.prompt({type:"select",name:"answer",message:"How do you want to play?",choices:[{title:"With the Computer",value:0},{title:"Against another human",value:1},{title:"Quit Program",value:2}]})).answer){case 0:n.control.playAgainstComputer=!0,t=!0;break;case 1:n.control.playAgainstComputer=!1,t=!0;break;case 2:t=!0,n.control.exitProgram();break;default:console.log("Wrong Type, try again")}}))}howToPlay(t){return s(this,void 0,void 0,(function*(){let e=!1;for(;!e;)switch((yield r.default.prompt({type:"select",name:"answer",message:t,choices:[{title:"Login",value:0},{title:"Play anonymous",value:1},{title:"Register",value:2},{title:"Quit Program",value:3}]})).answer){case 0:if(yield l.database.connect()){let t=yield n.control.regManager.login();if(t)return e=!0,console.log("Login successfull: ",e),t}else console.log("No connection to DB"),n.control.exitProgram();break;case 1:return e=!0,n.control.regManager.registerAnonymousUser();case 2:if(yield l.database.connect()){let t=yield n.control.regManager.register();if(t)return e=!0,console.log("Registration successfull: ",e),t}else console.log("No connection to DB"),n.control.exitProgram();break;case 3:e=!0,n.control.exitProgram();break;default:console.log("Wrong Type, try again")}}))}createPlayground(){return s(this,void 0,void 0,(function*(){let t=!1;for(;!t;){let e=yield r.default.prompt({type:"number",name:"size",message:"Size of board in X-Direction:"});n.control.sizeX=e.size,null==n.control.sizeX&&(console.log("SizeX: "+n.control.sizeX),yield n.control.exitProgram()),e=yield r.default.prompt({type:"number",name:"size",message:"Size of board in Y-Direction:"}),n.control.sizeY=e.size,null==n.control.sizeY&&(console.log("SizeY: "+n.control.sizeY),yield n.control.exitProgram()),n.control.sizeX>=3&&n.control.sizeY>=3&&n.control.sizeX<=15&&n.control.sizeY<=15?t=!0:console.log("Board have to has a minimum size of 3x3 and a maximum of 15x15!\nPlease try again")}for(t=!1;!t;){let e=yield r.default.prompt({type:"number",name:"winningPoints",message:"How many elements in row to win?"});n.control.winningPointsInRow=e.winningPoints,null==n.control.winningPointsInRow&&(console.log("winningPointsInRow: "+n.control.winningPointsInRow),yield n.control.exitProgram()),n.control.winningPointsInRow<=n.control.sizeX&&n.control.winningPointsInRow<=n.control.sizeY&&n.control.winningPointsInRow>1?t=!0:console.log("Winning points must be smaller than shortest side of board and minimum 2!\nPlease try again")}for(let t=0;t<n.control.sizeY;t++){n.control.playArray[t]=[];for(let e=0;e<n.control.sizeX;e++)n.control.playArray[t][e]=n.control.FIELDEMPTY}}))}waitAndSetUserInputConnectFour(){return s(this,void 0,void 0,(function*(){console.log("Possible from (X:1) (left) until (X:"+n.control.sizeX+" (right)");let t,e=!1;for(;!e;)if(t=(yield r.default.prompt({type:"number",name:"positionX",message:"X:"})).positionX,null==t&&(console.log("X: "+t),yield n.control.exitProgram()),t<=n.control.sizeX&&t>0){t--;for(let o=n.control.sizeY-1;o>=0;o--)if(n.control.playArray[o][t]==n.control.FIELDEMPTY){if(n.control.lastFieldSetXY=[t,o],n.control.isUser1Playing){n.control.playArray[o][t]=n.control.FIELDUSER1,e=!0;break}n.control.playArray[o][t]=n.control.FIELDUSER2,e=!0;break}e||console.log("Column: "+(t+1)+" is full, please try again")}else console.log("X:"+t+", field is outside the board, please type in again")}))}waitAndSetUserInputTictactoe(){return s(this,void 0,void 0,(function*(){console.log("Possible from(1,1) (top left) until (X:"+n.control.sizeX+",Y:"+n.control.sizeY+") (bottom right)");let t,e,o=!1;for(;!o;){let s=yield r.default.prompt({type:"number",name:"positionX",message:"X:"});t=s.positionX,s=yield r.default.prompt({type:"number",name:"positionY",message:"Y:"}),e=s.positionY,null!=t&&null!=e||(console.log("X: "+t+", Y: "+e),yield n.control.exitProgram()),t<=n.control.sizeX&&e<=n.control.sizeY&&t>0&&e>0?(t--,e--,n.control.playArray[e][t]==n.control.FIELDEMPTY?(n.control.lastFieldSetXY=[t,e],n.control.isUser1Playing?(n.control.playArray[e][t]=n.control.FIELDUSER1,o=!0):(n.control.playArray[e][t]=n.control.FIELDUSER2,o=!0)):console.log("Field isn't empty, please try again")):(console.log("X:"+t+", Y:"+e),console.log("Field is outside the board, please type in again"))}}))}}},429:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.testPasswordSecurity=void 0,e.testPasswordSecurity=function(t){return!!t&&null!=t.match(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)}},435:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function l(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,l)}a((s=s.apply(t,e||[])).next())}))},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RegistrationManagerImp=void 0;const r=o(376),n=o(941),l=i(o(650)),a=o(429);e.RegistrationManagerImp=class{registerAnonymousUser(){return new r.User(!1,"Anon")}registerComputerUser(){return new r.User(!1,"Computer")}register(){return s(this,void 0,void 0,(function*(){let t=yield this.getUserName(),e=null;if(t&&(e=yield this.getPassword()),t&&e){if(e.trim().length<=1||t.trim().length<=1)return console.log("Please provide non-empty input"),this.register();let o=new r.User(!0,t,e);return(yield n.database.register(o))||(console.log("Registration went wrong, please try again!"),null)}return this.register()}))}login(){return s(this,void 0,void 0,(function*(){let t=yield this.getUserName(),e=null;if(t&&(e=yield this.getPassword()),t&&e){if(e.trim().length<1||t.trim().length<1)return console.log("Please provide non-empty input"),this.login();let o=yield n.database.login(t,e);if(o){let e=new r.User(!0,t);return e.setValuesFromUser(o),e}return console.log("Login went wrong, please try again!"),null}return this.login()}))}testPasswordSecurity(t){return(0,a.testPasswordSecurity)(t)}checkUsername(t){return!!t&&null!=t.match(/^(?=.{5,20}$)[a-zA-Z0-9._]+(?<![_.])$/)}getUserName(){return s(this,void 0,void 0,(function*(){let t=null,e=yield l.default.prompt({type:"text",name:"answer",message:"Please enter your username:"});return this.checkUsername(e.answer)?t=e.answer:console.log('Username doesn\'t match pattern: "alphanumeric usernames between 5 and 20 characters, no special characters"'),t}))}getPassword(){return s(this,void 0,void 0,(function*(){let t=null,e=yield l.default.prompt({type:"password",name:"answer",message:"Please enter your password:"});return this.testPasswordSecurity(e.answer)?t=e.answer:console.log('Password doesn\'t match pattern: "Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"'),t}))}}},328:function(t,e,o){var s=this&&this.__awaiter||function(t,e,o,s){return new(o||(o=Promise))((function(i,r){function n(t){try{a(s.next(t))}catch(t){r(t)}}function l(t){try{a(s.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,l)}a((s=s.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Statistics=void 0;const i=o(941);e.Statistics=class{constructor(){this.gamesPlayed=0,this.gamesWon=0,this.gamesLost=0}setValues(t,e){return s(this,void 0,void 0,(function*(){this.gamesPlayed++,t&&!e&&this.gamesWon++,!t&&e&&this.gamesLost++,t||e||this.gamesPlayed++,yield this.saveStatistic()}))}initSetValues(t,e,o){this.gamesPlayed=this.gamesPlayed+t,this.gamesWon=this.gamesWon+e,this.gamesLost=this.gamesLost+o}saveStatistic(){return s(this,void 0,void 0,(function*(){i.Control.user.statistics=this,i.Control.user.registered&&(yield i.database.saveStatistic(i.Control.user))}))}}},376:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.User=void 0;const s=o(328);e.User=class{constructor(t,e,o,i,r){this.statistics=new s.Statistics,r&&(this._id=r),this.registered=t,this.username=e,o&&(this.password=o),i&&this.statistics.initSetValues(i.gamesPlayed,i.gamesWon,i.gamesLost)}setValuesFromUser(t){t._id&&(this._id=t._id),t.registered&&(this.registered=t.registered),t.username&&(this.username=t.username),t.statistics&&this.statistics.initSetValues(t.statistics.gamesPlayed,t.statistics.gamesWon,t.statistics.gamesLost),this.password=void 0}returnStatistic(){let t=Math.round(this.statistics.gamesWon/this.statistics.gamesPlayed*100);(Number.isNaN(t)||null==t)&&(t=0);let e=Math.round((this.statistics.gamesPlayed-this.statistics.gamesWon-this.statistics.gamesLost)/this.statistics.gamesPlayed*100);(Number.isNaN(e)||null==e)&&(e=0);let o=Math.round(this.statistics.gamesLost/this.statistics.gamesPlayed*100);return(Number.isNaN(o)||null==o)&&(o=0),"You played "+this.statistics.gamesPlayed+" games with "+this.statistics.gamesWon+" games won ("+t+"%) and "+(this.statistics.gamesPlayed-this.statistics.gamesWon-this.statistics.gamesLost)+" drawn games("+e+"%). You lost "+this.statistics.gamesLost+" games("+o+"%)."}}},607:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.control=void 0;const s=o(941);process.env.dbUserName="ConnectFourUser",process.env.dbUserPW="5RUAlpGA8sfAN2eJ",e.control=new s.Control,e.control.main()},96:t=>{t.exports=require("bcrypt")},13:t=>{t.exports=require("mongodb")},650:t=>{t.exports=require("prompts")}},e={};!function o(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,o),r.exports}(607)})();